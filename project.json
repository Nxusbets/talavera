{
  "project": {
    "name": "Talavera SaaS - Localized Subscriptions",
    "description": "Full-Stack prototype: Auth + Projects + Subscriptions",
    "duration": "8 hours",
    "startDate": "2025-10-24",
    "status": "Tier 0 Complete | Ready for Implementation"
  },
  "tiers": {
    "tier0": {
      "name": "Configuration & Test Harness",
      "duration": "1-2 hours",
      "status": "✅ COMPLETE",
      "components": [
        "Monorepo with workspaces",
        "Docker Compose (3 services)",
        "5 Database migrations",
        "Vitest + Supertest harness",
        "10 Gherkin scenarios",
        "React components + i18n",
        "13 documentation files"
      ],
      "deliverables": {
        "files": 50,
        "linesOfCode": 2500,
        "migrations": 5,
        "tests": 3,
        "scenarios": 10,
        "documentation": 13
      }
    },
    "tier1": {
      "name": "Auth + Projects",
      "duration": "2-3 hours",
      "status": "⏳ READY",
      "toImplement": [
        "AuthService (JWT + bcrypt)",
        "UserRepository",
        "ProjectService (quota checking)",
        "ProjectRepository",
        "AuthController",
        "ProjectController",
        "AuthMiddleware",
        "QuotaMiddleware",
        "Frontend API integration"
      ],
      "guide": "TIER1_GUIDE.md",
      "estimatedLines": 1500
    },
    "tier2": {
      "name": "Subscriptions & Payments",
      "duration": "1.5-2 hours",
      "status": "⏳ READY",
      "toImplement": [
        "PaymentAdapter interface",
        "MockStripeAdapter",
        "SubscriptionService",
        "InvoiceRepository",
        "PlanController",
        "Database transactions",
        "Frontend upgrade flow"
      ],
      "keyPattern": "Adapter/Seam",
      "guide": "TIER2_GUIDE.md",
      "estimatedLines": 800
    },
    "tier3": {
      "name": "Documentation & Delivery",
      "duration": "1-1.5 hours",
      "status": "⏳ READY",
      "tasks": [
        "Generate coverage reports (>85%)",
        "Review ADRs",
        "Complete final README",
        "Initialize Git repository",
        "Project delivery"
      ]
    }
  },
  "technologies": {
    "backend": {
      "runtime": "Node.js 20+",
      "framework": "Express.js 4.18",
      "language": "TypeScript 5.3",
      "database": "PostgreSQL 15",
      "orm": "Knex.js 3.1",
      "authentication": "JWT + bcrypt 5.1",
      "testing": "Vitest 1.1 + Supertest 6.3"
    },
    "frontend": {
      "framework": "React 18.2",
      "language": "TypeScript 5.3",
      "localization": "i18next 23.7",
      "validation": "Zod 3.22",
      "testing": "React Testing Library 14.1"
    },
    "infrastructure": {
      "containerization": "Docker Compose 3.8",
      "database": "PostgreSQL 15-Alpine",
      "packages": "npm workspaces"
    },
    "methodology": [
      "BDD (Behavior-Driven Development)",
      "TDD (Test-Driven Development)",
      "Gherkin (executable specs)",
      "AI-Assisted Development"
    ]
  },
  "database": {
    "tables": [
      {
        "name": "users",
        "columns": [
          "id (PK)",
          "email (UNIQUE)",
          "password_hash",
          "first_name",
          "last_name",
          "locale",
          "plan",
          "projects_quota",
          "created_at",
          "updated_at"
        ]
      },
      {
        "name": "projects",
        "columns": [
          "id (PK)",
          "user_id (FK)",
          "name",
          "slug",
          "description",
          "created_at",
          "updated_at"
        ],
        "unique": ["user_id, slug"]
      },
      {
        "name": "plans",
        "columns": [
          "id (PK)",
          "code (UNIQUE)",
          "name_en",
          "name_es",
          "projects_quota",
          "price",
          "created_at",
          "updated_at"
        ]
      },
      {
        "name": "subscriptions",
        "columns": [
          "id (PK)",
          "user_id (FK)",
          "plan_id (FK)",
          "status",
          "started_at",
          "expires_at",
          "created_at",
          "updated_at"
        ]
      },
      {
        "name": "invoices",
        "columns": [
          "id (PK)",
          "user_id (FK)",
          "subscription_id (FK)",
          "invoice_number (UNIQUE)",
          "amount",
          "status",
          "created_at",
          "updated_at"
        ]
      }
    ]
  },
  "documentation": {
    "files": [
      {
        "name": "00_START_HERE.md",
        "purpose": "Entry point with complete overview",
        "priority": "HIGHEST",
        "readTime": "5 min"
      },
      {
        "name": "README.md",
        "purpose": "Quick start and navigation",
        "priority": "HIGH",
        "readTime": "5 min"
      },
      {
        "name": "TIER0_SETUP.md",
        "purpose": "Tier 0 verification checklist",
        "priority": "HIGH",
        "readTime": "3 min"
      },
      {
        "name": "TIER1_GUIDE.md",
        "purpose": "Detailed Auth+Projects implementation",
        "priority": "HIGH",
        "readTime": "20 min",
        "words": 7000
      },
      {
        "name": "TIER2_GUIDE.md",
        "purpose": "Detailed Subscriptions implementation",
        "priority": "HIGH",
        "readTime": "20 min",
        "words": 6000
      },
      {
        "name": "ARCHITECTURE_DECISIONS.md",
        "purpose": "5 ADRs with rationale",
        "priority": "MEDIUM",
        "readTime": "15 min",
        "words": 3000
      },
      {
        "name": "AI_USAGE.md",
        "purpose": "AI prompts tracking and validation",
        "priority": "MEDIUM",
        "readTime": "15 min",
        "words": 2500
      },
      {
        "name": "DELIVERABLES.md",
        "purpose": "Complete project statistics",
        "priority": "MEDIUM",
        "readTime": "15 min",
        "words": 3000
      },
      {
        "name": "COMMANDS.md",
        "purpose": "70+ CLI commands reference",
        "priority": "HIGH",
        "readTime": "10 min",
        "words": 2000
      },
      {
        "name": "PROJECT_STATUS.md",
        "purpose": "Visual project summary",
        "priority": "MEDIUM",
        "readTime": "5 min"
      },
      {
        "name": "RESUMEN_EJECUTIVO.md",
        "purpose": "Spanish executive summary",
        "priority": "MEDIUM",
        "readTime": "10 min"
      },
      {
        "name": "CHECKLIST.md",
        "purpose": "Interactive implementation checklist",
        "priority": "HIGH",
        "readTime": "5 min"
      },
      {
        "name": "INDEX.html",
        "purpose": "Browser-friendly documentation index",
        "priority": "LOW",
        "readTime": "2 min"
      }
    ],
    "totalWords": 30000,
    "totalReadTime": "120 min"
  },
  "features": {
    "authentication": {
      "tier": 1,
      "status": "SPECIFICATION READY",
      "methods": ["signup", "signin", "logout"],
      "security": ["JWT", "bcrypt hashing"],
      "gherkinScenarios": 4
    },
    "projects": {
      "tier": 1,
      "status": "SPECIFICATION READY",
      "operations": ["create", "read", "update", "delete", "list"],
      "quotaManagement": "Middleware-based",
      "gherkinScenarios": 4
    },
    "subscriptions": {
      "tier": 2,
      "status": "SPECIFICATION READY",
      "operations": ["upgrade_plan", "cancel", "view_history"],
      "paymentHandling": "Adapter pattern",
      "gherkinScenarios": 2
    },
    "localization": {
      "tier": 0,
      "status": "IMPLEMENTED",
      "languages": ["en", "es"],
      "implementation": "i18next + backend keys"
    }
  },
  "architecture": {
    "backend": {
      "layers": [
        "Routes",
        "Controllers",
        "Services",
        "Repositories",
        "Database"
      ],
      "patterns": [
        "Middleware chain",
        "Dependency injection",
        "Adapter/Seam (payments)",
        "Transaction wrapper"
      ]
    },
    "frontend": {
      "components": [
        "SignIn",
        "SignUp",
        "Dashboard",
        "PlansModal"
      ],
      "hooks": [
        "useAuth",
        "useSubscription",
        "useAPI"
      ]
    }
  },
  "risks": [
    {
      "id": 1,
      "description": "JWT stored in localStorage",
      "severity": "HIGH",
      "mitigation": "ADR-002: Change to HTTP-Only cookies in production"
    },
    {
      "id": 2,
      "description": "Database connection flakiness",
      "severity": "MEDIUM",
      "mitigation": "Health checks with retries in Docker Compose"
    },
    {
      "id": 3,
      "description": "N+1 query problems",
      "severity": "MEDIUM",
      "mitigation": "Document best practices in TIER1_GUIDE.md"
    },
    {
      "id": 4,
      "description": "Accidental Stripe charges",
      "severity": "HIGH",
      "mitigation": "Mock adapter by default, explicit env var for real"
    },
    {
      "id": 5,
      "description": "Password in logs",
      "severity": "HIGH",
      "mitigation": "Service layer validation, never log passwords"
    }
  ],
  "adrs": [
    {
      "id": "ADR-001",
      "title": "ORM Choice: Knex vs Prisma",
      "decision": "Knex",
      "status": "ACCEPTED",
      "rationale": "Control, transparency, learning-friendly"
    },
    {
      "id": "ADR-002",
      "title": "JWT Storage Strategy",
      "decision": "localStorage (temporary) → HTTP-Only cookies (production)",
      "status": "TEMPORARY",
      "rationale": "Rapid development + production security"
    },
    {
      "id": "ADR-003",
      "title": "Payment Adapter Pattern",
      "decision": "Seam/Adapter pattern",
      "status": "ACCEPTED",
      "rationale": "Mock for dev, swap for production"
    },
    {
      "id": "ADR-004",
      "title": "Localization Strategy",
      "decision": "Hybrid (backend keys + frontend lookup)",
      "status": "ACCEPTED",
      "rationale": "Flexible and scalable approach"
    },
    {
      "id": "ADR-005",
      "title": "Database Transaction Strategy",
      "decision": "Knex transactions wrapper",
      "status": "ACCEPTED",
      "rationale": "Atomicity for subscription upgrades"
    }
  ],
  "aiUsageMetrics": {
    "tier0": {
      "totalPrompts": 5,
      "outputsAccepted": 5,
      "outputsPartiallyAccepted": 0,
      "outputsRejected": 0,
      "acceptanceRate": "100%"
    },
    "totalPromptsPlanned": "15-20",
    "validationStrategy": "Comprehensive + documented in AI_USAGE.md"
  },
  "timeline": {
    "tier0": {
      "estimated": "1-2 hours",
      "actual": "COMPLETE",
      "status": "✅"
    },
    "tier1": {
      "estimated": "2-3 hours",
      "actual": "PENDING",
      "status": "⏳"
    },
    "tier2": {
      "estimated": "1.5-2 hours",
      "actual": "PENDING",
      "status": "⏳"
    },
    "tier3": {
      "estimated": "1-1.5 hours",
      "actual": "PENDING",
      "status": "⏳"
    },
    "totalEstimated": "6-8.5 hours",
    "buffer": "0.5-1 hour",
    "onSchedule": true
  },
  "quickStart": {
    "option1_manual": [
      "npm install -w api",
      "npm install -w web",
      "npm run docker:up",
      "npm run db:setup -w api",
      "npm run test -w api"
    ],
    "option2_automated": ".\\ quick-start.ps1",
    "expectedOutput": "PASS ✓ 2 passed",
    "timeRequired": "5 minutes"
  },
  "directories": {
    "api": "Express backend with TypeScript",
    "web": "React frontend with TypeScript",
    "features": "Gherkin BDD specifications",
    "root": "Configuration files and documentation"
  },
  "files": {
    "total": 50,
    "typescript": 8,
    "migrations": 5,
    "tests": 3,
    "documentation": 13,
    "configuration": 8,
    "other": 13
  },
  "commands": {
    "install": "npm install -w api && npm install -w web",
    "start": "npm run docker:up",
    "test": "npm run test -w api",
    "dev": "npm run dev:api & npm run dev:web",
    "build": "npm run build:api && npm run build:web",
    "coverage": "npm run test:coverage -w api"
  },
  "success_criteria": {
    "tier0": [
      "✅ Scaffolding complete",
      "✅ Docker working",
      "✅ Tests passing",
      "✅ Database ready"
    ],
    "tier1": [
      "Auth endpoints working",
      "Project CRUD working",
      "Tests >85% coverage",
      "Frontend integrated"
    ],
    "tier2": [
      "Subscription upgrade working",
      "Invoice generation working",
      "Payment adapter pattern",
      "Tests >85% coverage"
    ],
    "tier3": [
      "All tests passing",
      "Coverage reports generated",
      "Git repository initialized",
      "Project delivered"
    ]
  },
  "generated": {
    "date": "2025-10-24",
    "by": "AI Assistant",
    "version": "1.0",
    "documentationWords": 30000,
    "totalArtifacts": 50
  }
}
